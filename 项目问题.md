面试用：



问题：arp cache缺失，导致udp点对点发送（非广播）丢包

解决方案：

增加udp重发（两侧滑动窗口）

但是，如果途中发送，发送端重启，而接收端的滑动窗口仍针对之前的count

其次，arp cache缺失导致的前几个udp包丢失，仅增加udp重发，等发现之前丢失报文时，可能已经过去很久，时效性不够，如丢失1、2报文，那么等收到3报文时，才会发现之前的报文丢失

且，滑动窗口的前一轮报文和后一轮报文重复问题！



目的：处理因arp cache刷新导致的UDP点对点发送出现的丢包情况

可以配置可重传多少个包

什么驱动

时间，多久没收到来自xxx的包？

需要设计发送缓冲区，用于可能的重发报文的保存

接受缓存区同样需要，检查是否需要重发



count用的是unsigned char，超出255即溢出为0



int windows[10];

windows[i]表示第i个报文的









排查技巧

当出现程序卡顿，速度慢等现象，根据代码处理的不同部分，建议在其前后增加时间戳（或者打印日志，肉眼监控），计算出耗时，从而查看不同阶段的用时情况，进而检查耗时点，并针对好耗时点进行优化

实例：paxos各阶段，云图加载耗时分析





小于1024的端口为特权端口，如果代码内bind此类端口需要root权限，此时可以修改应用程序的权限，从而使用非root用户启动，而非root下运行

```C++
chown root.root xxx/xxx/xxx.out//修改此文件的属主和所在组为root
chmod u+s xxx/xxx/xxx.out//u代表文件所有者，+代表增加权限，s代表将进程的属主和组id修改为该文件的文件属主，此时就是root
//但此时环境变量也是root下的，可能导致错误
```



普通用户bind特权端口会导致报错，返回错误为WSAEACCES 10013 （WINDOWS）Permission denied.